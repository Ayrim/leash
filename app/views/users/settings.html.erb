<%= stylesheet_link_tag "application", params[:controller], :media => "all" %>

  <!-- START CONTENT -->
      <section id="content">        

        <!--start container-->
        <div class="container">

          <div id="profile-page" class="section">
            <!-- profile-page-header -->
            <div id="profile-page-header" class="card">
                <div class="card-image waves-effect waves-block waves-light">
                    <img class="activator" src="<%= user_banner() %>" alt="user background">                    
                </div>
                <figure class="card-profile-image circle z-depth-2 responsive-img activator" style="background: url(<%= user_avatar() %>) 50% 50% no-repeat; width: 110px; height: 110px; background-size:cover;">
                </figure>
                <div class="card-content">
                  <div class="row">                    
                    <div class="col s3 offset-s2 personName">                        
                        <h4 class="card-title grey-text text-darken-4">
                          <%= current_user.firstname + ' ' + current_user.lastname %>
                        </h4>
                        <p class="medium-small grey-text">Premium user</p>                        
                    </div>         		
                    <div class="col s2 offset-s2 center-align">
                        <h4 class="card-title grey-text text-darken-4">0</h4>
                        <p class="medium-small grey-text">Dogs</p>                        
                    </div>   
                    <div class="col s2 center-align">
                        <h4 class="card-title grey-text text-darken-4">10+</h4>
                        <p class="medium-small grey-text">Walking Experience</p>                        
                    </div>             
                    <div class="col s1 center-align">
                      <a class="btn-floating activator waves-effect waves-light darken-2 right">
                          <i class="mdi-action-perm-identity"></i>
                      </a>
                    </div>            
                    <div class="col s1 right-align editBtnHeader">
                      <%= link_to edit_settings_path, :class => 'btn-floating waves-effect waves-light darken-2 right' do %>
                        <i class="mdi-image-edit"></i>
                      <% end %>
                    </div>
                  </div>
                </div>
                <div class="card-reveal">
                    <p> 
                      <span class="card-title grey-text text-darken-4"><%= current_user.firstname + ' ' + current_user.lastname %> <i class="mdi-navigation-close right"></i></span>  
                      <span><i class="mdi-action-perm-identity cyan-text text-darken-2"></i> Premium user</span>
                    </p>

                    <p><%= current_user.description %></p>
                    
                    <p><i class="mdi-action-perm-phone-msg cyan-text text-darken-2"></i> <%= current_user.phone %></p>
                    <p><i class="mdi-communication-email cyan-text text-darken-2"></i> <%= current_user.email %></p>
                    <p><i class="mdi-social-cake cyan-text text-darken-2"></i> 
                      <% if current_user.birthdate %>
                        <%= current_user.birthdate.to_formatted_s(:long_ordinal) %>
                      <% end %>
                    </p>
                    <!--<p class="editBtn"> 
                      <a class="btn-floating waves-effect waves-light darken-2 left">
                          <i class="mdi-image-edit"></i>
                      </a>
					</p>-->
                </div>
            </div>
            <!--/ profile-page-header -->

            <!-- profile-page-content -->
            <div id="profile-page-content" class="row">
              <div class=" col s12 m4">
                <div class="card light-blue hoverable" >
                  <div class="card-content white-text center">
                    <span class="card-title"><i class="fa fa-paw" aria-hidden="true"></i> Honden</span>
                  </div>                  
                </div>
              </div>
              <div class=" col s12 m4">
                <div class="card light-blue hoverable">
                  <div class="card-content white-text center">
                    <span class="card-title"><i class="fa fa-map-marker" aria-hidden="true"></i> Routes</span>
                  </div>                  
                </div>
              </div>
              <div class=" col s12 m4">
                <div class="card light-blue hoverable" >
                  <div class="card-content white-text center">
                    <span class="card-title"><i class="fa fa-newspaper-o" aria-hidden="true"></i> Activeiten</span>
                  
                  </div>                  
                </div>
              </div>
            </div>
            <div id="profile-page-content" class="row">
              <!-- profile-page-sidebar-->
              <div id="profile-page-sidebar" class="col s12 m4">

                <!-- Profile About Details  -->
                <ul id="profile-page-about-details" class="collection z-depth-1 hoverable">
                  <li class="collection-item">
                    <div class="row">
                      <div class="col s5 grey-text darken-1"><i class="mdi-action-wallet-travel"></i> Area</div>
                      <div class="col s7 grey-text text-darken-4 right-align">Coast</div>
                    </div>
                  </li>
                  <li class="collection-item">
                    <div class="row">
                      <div class="col s5 grey-text darken-1"><i class="mdi-social-poll"></i> Skills</div>
                      <div class="col s7 grey-text text-darken-4 right-align"> Dog walking/training</div>
                    </div>
                  </li>
                  <li class="collection-item">
                    <div class="row">
                      <div class="col s5 grey-text darken-1"><i class="mdi-social-domain"></i> Lives in</div>
                      <div class="col s7 grey-text text-darken-4 right-align"><%= current_user.address.try(:city).try(:name) %>, <%= current_user.address.try(:country).try(:ISO) %></div>
                    </div>
                  </li>
                  <li class="collection-item">
                    <div class="row">
                      <div class="col s5 grey-text darken-1"><i class="mdi-social-cake"></i> Birth date</div>
                      <div class="col s7 grey-text text-darken-4 right-align">
                      <% if current_user.birthdate %>
                        <%= current_user.birthdate.to_formatted_s(:long_ordinal) %>
                      <% end %>
                    </div>
                    </div>
                  </li>
                </ul>
                <!--/ Profile About Details  -->

                <!-- Profile About  -->
                <div class="card amber darken-2 hoverable">
                  <div class="card-content white-text center-align">
                    <p class="card-title"><i class="mdi-social-group-add"></i> 2</p>
                    <p>Connections</p>
                  </div>                  
                </div>
                <!-- Profile About  -->

                <!-- Profile feed  -->
			 <ul class="collection z-depth-1 with-header hoverable">
				<li class="collection-header"><strong>Planning</strong></li>
				<li class="collection-item avatar">
				  <img src="assets/lake-animals-dogs-pets.jpg" alt="" class="circle">
				  <img src="https://www.peepl.be/static/images/team/ayrton.jpg" class="circle top-circle font-size:0.5em;" style="position:absolute; left:40px; top: 3px; color:#ffc107;" >
				  <span class="title truncate"><strong>Coming</strong> for a walk with Zara</span>
				  <p class="truncate"><i>Ayrton Vercruysse</i><br>
					18:00 - 19:00
				  </p>
				  <a href="#!" class="secondary-content planningDay">Today</a>
				</li>
				<li class="collection-item avatar">
				  <img src="http://bebusinessed.com/wp-content/uploads/2014/03/734899052_13956580111.jpg" alt="" class="circle">
				  <span class="title truncate"><strong>Going</strong> for a walk with Blacky</span>
				  <p class="truncate"><i>@ Aaron Bakker</i><br>
					10:00 - 11:00
				  </p>
				  <a href="#!" class="secondary-content planningDay">Saturday</a>
				</li>
			  </ul>
			
                <!-- Profile feed  -->


                <!-- Afbeeldingen About  -->

       <ul class="collection z-depth-1 with-header hoverable">
        <li class="collection-header collection-PictureHeader">
          <div class="card amber darken-2">
            <div class="card-content white-text center-align">
              <p class="card-title"><i class="mdi-image-camera-alt"></i></p>
              <p>Afbeeldingen</p>
            </div>                  
          </div>
        </li>
        <li class="collection-item">
         <div class="row">
          <% @PicturePosts.each do |post| %>
            <div class="col l3 m4" >
              <div class="card-image waves-effect waves-block waves-light" style="background:url(<%= collectWallpostPicture(post.picture) %>) no-repeat center center; height:5.5rem; width:5.5rem; background-size: cover;">
              </div>
            </div>
          <% end %>
         </div>
        </li>
        </ul>
                <!-- Afbeeldingen About  -->



                <!-- Map Card -->
                <div class="map-card hoverable">
                    <div class="card">
                        <div class="card-image waves-effect waves-block waves-light">
                            <div id="map-canvas" data-lat="51.312374" data-lng="3.132768"></div>
                        </div>
                        <div class="card-content">                    
                            <a class="btn-floating btn-move-up waves-effect waves-light darken-2 right" href="javascript:ShowGeoLocation()" onclick="javascript:ShowGeoLocation()">
                                <i class="mdi-maps-pin-drop"></i>
                            </a>
                            <h4 class="card-title grey-text text-darken-4">
                              <% if current_user.address %>
                                <%= current_user.address.try(:city).try(:name) %>
                              <% elsif %>
                                <%= "Unknown" %>
                              <% end %>
                            </h4>
                            <p class="blog-post-content">Indication of where this person lives.</p>
                        </div>
                    </div>
                </div>
                <!-- Map Card -->

              </div>
              <!-- profile-page-sidebar-->

              <div id="wallpostSection">
                <%= render template: "wallpost/index", :url => index_wallpost_path %>
              </div>
            </div>
          </div>
        </div>
        
        <!--end container-->
      </section>
      <!-- END CONTENT -->

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAZnaZBXLqNBRXjd-82km_NO7GUItyKek"></script>
      <script type="text/javascript">
          ShowGeoLocation();

          function ShowGeoLocation() {
            var street = "<%= current_user.address.try(:street) %>" + "";
            var city = "<%= current_user.address.try(:city).try(:name) %>" + "";
            var country = "<%= current_user.address.try(:country).try(:name) %>" + "";
            var address = street + ', ' + city + ', ' + country;
            if (address === "0, 0, 0")
            {
              address = "Brussel, Belgium";
            }
            var geocoder = new google.maps.Geocoder();
            
            var map = new google.maps.Map(document.getElementById('map-canvas'), {
              zoom: 10,
              center: {lat: 51.309553, lng: 3.132350},
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false,
                scrollwheel: true,
                draggable: true,
              styles: [{"featureType":"landscape.natural","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#e0efef"}]},{"featureType":"poi","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"hue":"#1900ff"},{"color":"#c0e8e8"}]},{"featureType":"road","elementType":"geometry","stylers":[{"lightness":100},{"visibility":"simplified"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"visibility":"on"},{"lightness":700}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#7dcdcd"}]}],
              mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
              navigationControl: false,
              navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL}
            });

            geocodeAddress(address, geocoder, map);
          };


          function geocodeAddress(address, geocoder, resultsMap) {
            geocoder.geocode({'address': address}, function(results, status) {
              if (status === google.maps.GeocoderStatus.OK) {
                resultsMap.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                  map: resultsMap,
                  position: results[0].geometry.location
                });
              } else {
                alert('Geocode was not successful for the following reason: ' + status);
              }
            })
          };
      </script>